# Процесс
Процесс - проведение хирургической операции в мед учреждении.
Состоит из следующих шагов:
1. Внесение изменения в мед документы (меняем статус Амбулаторный на Госпитализированный)
2. Резервирование ответственного врача
3. Резервирование операционной
4. Резервирование палаты
5. Оплата операции (изменение баланса на счету пациента)

# Реализация

В процессе будут учавствовать следующие микросервисы:
1. Микросервис "Документы", который предоставляет функционал по работе с мед. документами пациентов
2. Микросервис "Ресурсы", при помощи которого можно работать с ресурсами клиники: палаты, операционные, врачи
3. Микросервис "Финансы", ответственным счета клиентов
4. Почтовый сервис, который отправляет пациенту письмо с деталями процесса
5. Микросервис "Процесс", являющийся оркестратором данного процесса

Для реализации распределенной транзакции будет использоваться шаблон Сага, состоящий из следующих шагов в указанном порядке:

1. Внесение изменения в мед документы (меняем статус Амбулаторный на Госпитализированный)
2. Резервирование ответственного врача
3. Резервирование операционной
4. Резервирование палаты
5. Проведение оплаты
6. Отправка уведомления по почте пациенту

Поворотным шагом будет Проведение оплаты. Если он не удается, то откатываем все предыдущие шаги. А почтовый сервис будет 
пытаться отправить сообщение, пока не получится. 
