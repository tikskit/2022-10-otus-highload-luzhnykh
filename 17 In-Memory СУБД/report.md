# set up
1. Запустить docker-compose up -d
2. Подключиться через консоль и вручную запустить все скрипты из dbscripts.txt:
```
docker exec -it 17in-memory-tarantool-1 console
```

# Сравнение производительности

Для сравнения производительности будем вызывать API /post/create и /post/get. Сперва замерим производительность этих АПИ 
напротив postgreSQL, а потом напротив TarantoolDB.

Сперва проводит тесты на postgresql. Выполняем тестирование следующим образом:
1. Очищаем таблицу с постами и делаем vacuum, чтобы размер таблицы и состояние индексов не влияли на результаты теста
2. Выполняем тестирование /post/create на 50 и 200 одновременных потоках
3. Сохраняем все ИД (это GUID) созданных записей в csv файл
4. Выполняем тест /post/get на 50 и 200 потоках. Источником идентификаторов, которые будем передавать в АПИ /post/get будет csv 
5. файл. Таким образом мы будем передавать в это АПИ все время разные ИД записей, что заставит считывать данные с диска, 
6. а не из кэша (имеется в виду кэш постгриса).

Повторяем все эти пункты, но уже с другим количеством одновременных потоков

## PostgreSQL

### 50 потоков

#### /post/create
| 90% | 95% | 99% | Throughput |
|-----|-----|-----|------------|
| 365 | 425 | 587 | 204.5      |

#### /post/get
| 90% | 95% | 99% | Throughput |
|-----|-----|-----|------------|
| 3   | 4   | 16  | 21101.7    |


### 200 потоков

#### /post/create
| 90%  | 95%   | 99%  | Throughput |
|------|-------|------|------------|
| 1642 | 2276  | 3819 | 206.1      |

#### /post/get
| 90% | 95% | 99% | Throughput |
|-----|-----|-----|------------|
| 9   | 15  | 209 | 19963.4    |


## Tarantool

### 50 потоков

#### /post/create
| 90% | 95% | 99% | Throughput |
|-----|-----|-----|------------|
| 16  | 18  | 21  | 4276       |

#### /post/get
| 90% | 95% | 99% | Throughput |
|-----|-----|-----|------------|
| 17  | 19  | 23  | 3964.9     |


### 200 потоков

#### /post/create
| 90% | 95% | 99% | Throughput |
|-----|-----|-----|------------|
| 75  | 83  | 102 | 3471.5     |


#### /post/get
| 90% | 95% | 99% | Throughput |
|-----|-----|-----|------------|
| 71  | 78  | 94  | 3911.6     |

# Выводы
Использование тарантула дает почти 20 кратный рост пропускной способности на вставку. Но при этом пропускная способность 
на чтение упала в 5 раз.
