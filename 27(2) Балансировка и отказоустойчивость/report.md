# Что было сделано:
1. Настроена асинхронная репликация и добавлены две slave-реплики
2. Настроен балансировщик HAProxy, который распределяет запросы по двум slave-репликам (haproxy.cfg)
3. Было развернуто одно master приложение (бэкенд) мастер, которое подключается к master-реплике постгриса
4. Было развернуто ещё три реплики приложения (backend), которые подключаются не к инстансам СУБД напрямую, а к HAProxy 
5. (который перенаправляет на slave реплики постгриса)
5. Настроен балансировщик nginx, который распределяет входящие запросы между 3 репликами
6. Написан docker-compose.yml, в котором поднимается всё описанное окружение
7. Был составлен скрипт для jmeter, при помощи которого подается нагрузка на систему

# Тестирование
## Проверка балансировки и High availability
1. Подавалась нагрузка из jmeter на АПИ /user/search
2. В Docker desktop приостанавливались контейнеры с репликами СУБД и/или приложения
3. Выполняя запросы из постмана убедился, что система сохраняет работоспособность не смотря на отключение компонентов. Хотя при выводе компонентов происходили ошибки запросов

## Проверка производительности
Проверим, как изменится производительность, если мы будем подавать нагрузку в 5/50/100 потоков на GET АПИ master 
приложения (которое подключается напрямую к master постгриса) в сравнении с тем, если мы будем подавать ту же нагрузку
на nginx
### Подключение к master
| Количество потоков | 90% | 95% | 99% | Throughput |
|--------------------|-----|-----|-----|------------|
| 5                  |  51 | 55  |  61 | 105.5      |
| 50                 | 307 | 312 | 329 | 143.54     |
| 100                | 597 | 603 | 624 | 172.6      |

### Подключение к балансировщику
| Количество потоков | 90% | 95% | 99% | Throughput |
|--------------------|-----|-----|-----|------------|
| 5                  | 54  | 56  | 60  | 92.4       |
| 50                 | 397 | 443 | 538 | 190.4      |
| 100                | 700 | 755 | 903 | 190.6      |

### Выводы
Балансировка отрицательно влияет на latency, но положительно на пропускную способность
